(()=>{function y(e,t){let o=document.createElement("div");o.className="feature-section",o.id=t;let n=document.createElement("h3");n.className="feature-section-header",n.textContent=e;let r=document.createElement("div");return r.className="feature-section-content",o.appendChild(n),o.appendChild(r),o}function L(e,t,o){let n=document.createElement("div");n.className="feature-box numeric-feature";let r=document.createElement("input");r.type="number",r.step="any",r.id=`feature-${t}`,r.min=o.min,r.max=o.max;let a=`Min: ${o.min}
                    Max: ${o.max}
                    Mean: ${o.mean.toFixed(2)}
                    Median: ${o.median}
                    Std: ${o.std.toFixed(2)}`;n.innerHTML=`
        <div class="feature-label" title="${a}">
            ${t}
            <span class="feature-type">Numeric</span>
            <div class="feature-range">Range: ${o.min} - ${o.max}</div>
        </div>
    `,n.appendChild(r),I(r,o),e.querySelector(".feature-section-content").appendChild(n)}function I(e,t){e.addEventListener("input",o=>{let n=parseFloat(o.target.value);n<t.min||n>t.max?(e.classList.add("invalid"),e.title=`Value must be between ${t.min} and ${t.max}`):(e.classList.remove("invalid"),e.title="")})}function D(e,t,o){let n=document.createElement("div");n.className="feature-box categorical-feature";let r=F(t,o.distinct_values);n.innerHTML=`
        <div class="feature-label">
            ${t}
            <span class="feature-type">Categorical</span>
            <div class="feature-values">${o.distinct_values.length} possible values</div>
        </div>
    `,n.appendChild(r),e.querySelector(".feature-section-content").appendChild(n)}function H(e,t,o){let n=document.createElement("div");n.className="feature-box ordinal-feature";let r=F(t,o.ordered_values);n.innerHTML=`
        <div class="feature-label">
            ${t}
            <span class="feature-type">Ordinal</span>
            <div class="feature-values">Order: ${o.ordered_values.join(" \u2192 ")}</div>
        </div>
    `,n.appendChild(r),e.querySelector(".feature-section-content").appendChild(n)}function F(e,t){let o=document.createElement("select");o.id=`feature-${e}`;let n=document.createElement("option");return n.value="",n.textContent="Select a value",n.disabled=!0,n.selected=!0,o.appendChild(n),t.forEach(r=>{let a=document.createElement("option");a.value=r,a.textContent=r,o.appendChild(a)}),o}function T(e,t,o){let n=document.createElement("div");n.className="feature-box numeric-feature";let r=document.createElement("input");r.type="number",r.step=o.step,r.id=`surrogate-${t}`,r.min=o.min,r.max=o.max,r.value=o.default;let a=`Min: ${o.min}
                  Max: ${o.max}
                  Default: ${o.default}`;n.innerHTML=`
        <div class="feature-label" title="${a}">
            ${o.label}
            <span class="feature-type">Numeric</span>
            <div class="feature-range">Range: ${o.min} - ${o.max}</div>
        </div>
    `,n.appendChild(r),I(r,o),e.querySelector(".feature-section-content").appendChild(n)}function S(e){let t=document.getElementById("datasetGrid");t.innerHTML="",e.datasets.forEach(o=>{let n=document.createElement("div");n.className="carousel-card",n.innerHTML=`<h3>${o}</h3>`,n.onclick=()=>selectDataset(o),t.appendChild(n)})}function E(e){let t=document.getElementById("classifierGrid");t.innerHTML="",Object.keys(e.classifiers).forEach(o=>{let n=document.createElement("div");n.className="carousel-card",n.innerHTML=`<h3>${o}</h3>`,n.onclick=()=>selectClassifier(o),t.appendChild(n)})}function M(e){let t=document.getElementById("parameterForm");t.className="parameter-form",t.innerHTML="",Object.entries(e).forEach(([o,n])=>{let r=document.createElement("div");r.className="parameter-input",r.innerHTML=`
            <label for="${o}">${o}:</label>
            <input type="text" id="${o}" value="${n}" 
                   onchange="updateParameter('${o}', this.value)">
        `,t.appendChild(r)})}function z(e){let t={neighbourhood_size:{label:"Neighbourhood Size",min:10,max:1e3,default:100,step:10},pca_step:{label:"PCA Step Size",min:.01,max:1,default:.1,step:.01}},o=y("Surrogate Model Parameters","surrogate-parameters");e.appendChild(o),Object.entries(t).forEach(([n,r])=>{T(o,n,r)})}var O=null;function W(e){O=e}function N(){return O}function R(e){let t=document.getElementById("featureCarousel");t.innerHTML="";let o={numeric:y("Numeric Features","numeric-features"),categorical:y("Categorical Features","categorical-features"),ordinal:y("Ordinal Features","ordinal-features")};Object.values(o).forEach(n=>{t.appendChild(n)}),_e(e,o),V(e)}function _e(e,t){e.numeric&&Object.keys(e.numeric).length>0?Object.entries(e.numeric).forEach(([o,n])=>{L(t.numeric,o,n)}):t.numeric.style.display="none",e.categorical&&Object.keys(e.categorical).length>0?Object.entries(e.categorical).forEach(([o,n])=>{D(t.categorical,o,n)}):t.categorical.style.display="none",e.ordinal&&Object.keys(e.ordinal).length>0?Object.entries(e.ordinal).forEach(([o,n])=>{H(t.ordinal,o,n)}):t.ordinal.style.display="none"}function V(e){e.numeric&&Object.entries(e.numeric).forEach(([t,o])=>{let n=document.getElementById(`feature-${t}`);n.value=o.median.toFixed(2)||""}),e.categorical&&Object.entries(e.categorical).forEach(([t,o])=>{let n=document.getElementById(`feature-${t}`),r=j(o.distinct_values);Array.from(n.options).forEach((a,i)=>{a.value===r&&(n.selectedIndex=i)})}),e.ordinal&&Object.entries(e.ordinal).forEach(([t,o])=>{let n=document.getElementById(`feature-${t}`),r=j(o.ordered_values);Array.from(n.options).forEach((a,i)=>{a.value===r&&(n.selectedIndex=i)})})}function B(){let e=N();if(!e?.featureDescriptor)return{};let t=e.featureDescriptor,o={};return t.numeric&&Object.keys(t.numeric).forEach(n=>{let r=document.getElementById(`feature-${n}`);o[n]=parseFloat(r.value)}),t.categorical&&Object.keys(t.categorical).forEach(n=>{let r=document.getElementById(`feature-${n}`);o[n]=r.value}),t.ordinal&&Object.keys(t.ordinal).forEach(n=>{let r=document.getElementById(`feature-${n}`);o[n]=r.value}),o}function j(e){let t=e.reduce((r,a)=>(r[a]=(r[a]||0)+1,r),{}),o=Math.max(...Object.values(t));return Object.keys(t).filter(r=>t[r]===o)[0]}function q(){let e=N();e?.featureDescriptor&&V(e.featureDescriptor)}function G(){return{neighbourhood_size:parseFloat(document.getElementById("surrogate-neighbourhood_size").value),PCAstep:parseFloat(document.getElementById("surrogate-pca_step").value)}}var l={classColors:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd"],ui:{highlight:"#ff4444",default:"#cccccc",nodeStroke:"#666666",linkStroke:"#999999",background:"#ffffff"},opacity:{active:1,inactive:1,hover:1}};function v(e){if(!Array.isArray(e)||e.length===0)return console.error("Invalid classes array provided to generateColorMap"),{};let t=[...new Set(e)].sort(),o={};return t.forEach((n,r)=>{o[n]=r<l.classColors.length?l.classColors[r]:`#${Math.floor(Math.random()*16777215).toString(16)}`}),o}function _(e,t){return e&&e.data&&e.data.is_leaf&&t[e.data.class_label]||l.ui.default}var b=null;function h(e){return Array.isArray(e)&&e.length>0?b=v(e):b=null,b}function k(){return b}function Y(e,t,o){let n=o;for(;n.parent;){let r=n.parent.data;if(!r.feature_name)continue;let a=t[r.feature_name],i=n===n.parent.children[0];if(i&&a>r.threshold||!i&&a<=r.threshold)return!1;n=n.parent}return!0}function A(e,t){if(e&&e.contentGroup&&(e.contentGroup.selectAll(".link").style("stroke",l.ui.linkStroke).style("stroke-width",`${e.metrics.linkStrokeWidth}px`),e.contentGroup.selectAll(".node circle").style("stroke",l.ui.nodeStroke).style("stroke-width",`${e.metrics.nodeBorderStrokeWidth}px`)),t&&t.points){let o=v([...new Set(t.data.targets)]);t.points.style("fill",(n,r)=>o[t.data.targets[r]]).style("opacity",l.opacity.hover)}}function X(e,t){if(!t||!t.points)return;let o=v([...new Set(t.data.targets)]);t.points.style("fill",(n,r)=>{let a=t.data.originalData[r];return Y(n,a,e)?l.ui.highlight:o[t.data.targets[r]]}).style("opacity",(n,r)=>{let a=t.data.originalData[r];return Y(n,a,e)?l.opacity.active:l.opacity.inactive})}function P(e,t,o){e.selectAll(".node").filter(n=>n===t).select("circle").style("stroke",l.ui.highlight).style("stroke-width",`${o.nodeBorderStrokeWidth}px`).style("opacity",l.opacity.active)}function Ae(e,t,o,n){e.selectAll(".link").filter(r=>r.source===t&&r.target===o).style("stroke",l.ui.highlight).style("stroke-width",`${n.linkStrokeWidth}px`)}function Z(e,t,o){let n=t;for(;n.parent;)P(e,n.parent,o),Ae(e,n.parent,n,o),n=n.parent}var U=null,J=null;function Q(e){U=e,window.pcaVisualization=e}function K(e){J=e,window.treeVisualization=e}function ee(){return U}function te(){return J}var C=null;function w(){return C}function oe(e,t,o,n,r,a){if(e.stopPropagation(),C===t){A(n,r),C=null;return}A(n,r),C=t,t.data.is_leaf&&(P(o,t,a),Z(o,t,a),X(t,r))}function ne(e){if(!e||!Array.isArray(e))return console.error("Invalid data provided to createHierarchy:",e),null;let t={};e.forEach(n=>{t[n.node_id]={...n,children:[]}});let o=t[0];return o?(e.forEach(n=>{n.left_child!==null&&t[n.node_id].children.push(t[n.left_child]),n.right_child!==null&&t[n.node_id].children.push(t[n.right_child])}),o):(console.error("No root node found in data"),null)}function re(){let e={top:90,right:90,bottom:90,left:90},t=800,o=800;return{margin:e,size:{width:t,height:o,innerWidth:t-e.left-e.right,innerHeight:o-e.top-e.bottom},tree:{splitAngle:0,minSplitWidth:20,minSplitHeight:10,levelHeightScale:100,get radianAngle(){return this.splitAngle*Math.PI/180}},node:{baseRadius:12,minRadius:4,maxRadius:20,baseLinkAndNodeBorderStrokeWidth:3,minLinkAndNodeBorderStrokeWidth:1,maxLinkAndNodeBorderStrokeWidth:8,maxZoom:20}}}function ae(e,t){let o={};e.descendants().forEach(i=>{o[i.depth]=(o[i.depth]||0)+1});let n=Math.max(...e.descendants().map(i=>i.depth)),r=e.descendants().length;function a(i,s,c,p){let u=Math.sqrt(i/30);return Math.min(p,Math.max(c,s*u))}return{totalNodes:r,maxDepth:n,get nodeRadius(){return a(this.totalNodes,t.node.baseRadius,t.node.minRadius,t.node.maxRadius)},get depthSpacing(){return t.size.innerHeight/(n+1)},get treeWidth(){return this.depthSpacing*(n+1)},get linkStrokeWidth(){return a(this.totalNodes,t.node.baseLinkAndNodeBorderStrokeWidth,t.node.minLinkAndNodeBorderStrokeWidth,t.node.maxLinkAndNodeBorderStrokeWidth)},get nodeBorderStrokeWidth(){return this.linkStrokeWidth}}}function Pe(e,t,o,n,r){return n.tree.minSplitWidth*2}function ie(e,t,o){let n=o.descendants().length*t.tree.minSplitWidth,r=o.descendants().length*t.tree.minSplitHeight;return d3.tree().size([n,r]).separation((a,i)=>Pe(a,i,e,t,o))}function se(e,t){return t.nodeRadius}function le(e,t){let o=e.descendants(),[n,r]=d3.extent(o,$=>$.x),[a,i]=d3.extent(o,$=>$.y),s=r-n,c=i-a,p=t.size.innerWidth/s,u=t.size.innerHeight/c,d=Math.min(p,u),f=(t.size.innerWidth-s*d)/2-n*d+t.margin.left,x=(t.size.innerHeight-c*d)/2-a*d+t.margin.top,g=d3.zoomIdentity.translate(f,x).scale(d);return g.k=d,g}function ce(){d3.select("#visualization svg").remove()}function de(e){return d3.select("#visualization").append("svg").attr("width",e.size.innerWidth+e.margin.left+e.margin.right).attr("height",e.size.innerHeight+e.margin.top+e.margin.bottom)}function ue(e,t){return e.append("g").attr("transform",`translate(${t.margin.left},${t.margin.top})`)}function pe(){return d3.select("body").append("div").attr("class","decision-tree-tooltip").style("visibility","hidden")}function me(e,t,o){e.append("rect").attr("width",Math.max(t.size.innerWidth,o.treeWidth)).attr("height",t.size.innerHeight*3).style("fill","transparent").style("pointer-events","all")}function Le({source:e,target:t},o){let{x:n,y:r}=e,{x:a,y:i}=t,s=(r+i)/2,c=n+(a-n)/2,p=s-Math.abs(a-n)*Math.tan(o.tree.radianAngle/2);return`M${n},${r} Q${c},${p} ${a},${i}`}function fe(e,t,o,n){e.selectAll(".link").data(t.links()).enter().append("path").attr("class","link").style("stroke-width",`${o.linkStrokeWidth}px`).attr("d",r=>Le(r,n)).style("fill","none").style("stroke",l.ui.linkStroke)}function he(e,t,o,n,r,a){let i=e.selectAll(".node").data(t.descendants()).join("g").attr("class","node").attr("transform",s=>`translate(${s.x},${s.y})`);return i.append("circle").attr("r",s=>se(s,o)).style("fill",s=>_(s,a)).style("stroke-width",`${o.nodeBorderStrokeWidth}px`).style("stroke",l.ui.nodeStroke).style("opacity",l.opacity.hover).on("mouseover",(s,c)=>Ie(s,c,r,o)).on("mousemove",s=>De(s,r)).on("mouseout",(s,c)=>He(s,c,r,o)),i.on("click",(s,c)=>oe(s,c,e,te(),ee(),o)),i}function Ie(e,t,o,n){let r=[t.data.class_label!==null?`<strong>Class:</strong> ${t.data.class_label}`:"",t.data.feature_name!==null?`<strong>Split: </strong>${t.data.feature_name} > ${t.data.threshold.toFixed(2)}`:""].filter(Boolean).join("<br>");o.html(r).style("class","decision-tree-tooltip").style("visibility","visible").style("left",e.pageX+10+"px").style("top",e.pageY-10+"px"),t!==w()&&typeof t.children>"u"&&d3.select(e.currentTarget).style("stroke",l.ui.highlight)}function De(e,t){t.style("left",e.pageX+10+"px").style("top",e.pageY-10+"px")}function He(e,t,o,n){if(o.style("visibility","hidden"),t!==w()){let r=w();if(r){let a=!1,i=r;for(;i;){if(i===t){a=!0;break}i=i.parent}a||d3.select(e.currentTarget).style("stroke",l.ui.nodeStroke).style("stroke-width",`${n.nodeBorderStrokeWidth}px`).style("opacity",l.opacity.hover)}else d3.select(e.currentTarget).style("stroke",l.ui.nodeStroke).style("stroke-width",`${n.nodeBorderStrokeWidth}px`).style("opacity",l.opacity.hover)}}function ge(e,t,o,n,r){let a=d3.zoom().scaleExtent([r,o.node.maxZoom]).on("zoom",function(i){t.attr("transform",i.transform)});return e.call(a),a}function ye(e){if(!e){console.error("No tree data provided to createVisualization");return}let t=re(),o=ne(e);if(!o){console.error("Failed to create hierarchy from tree data");return}let n=[...new Set(e.map(g=>g.class_label))].filter(Boolean),r=k()||h(n),a=d3.hierarchy(o),i=ae(a,t);ce();let s=de(t),c=ue(s,t),p=pe(),d=ie(i,t,a)(a);me(c,t,i),fe(c,d,i,t),he(c,d,i,t,p,r);let f=le(d,t),x=ge(s,c,t,i,f.k);s.call(x.transform,f),K({contentGroup:c,treeData:d,metrics:i}),window.treeVisualization={contentGroup:c,treeData:d,metrics:i}}function xe(){return d3.select("body").append("div").attr("class","pca-tooltip").style("opacity",0).style("position","absolute").style("background-color","white").style("border","1px solid #ddd").style("border-radius","4px").style("padding","12px").style("pointer-events","none").style("max-width","300px").style("font-size","12px").style("line-height","1.4")}function ke(e,t,o,n){let r=e.target.__data__?o.pcaData.findIndex(c=>c[0]===e.target.__data__[0]&&c[1]===e.target.__data__[1]):-1;if(r===-1){console.warn("Could not find matching point data");return}let a=o.targets[r],i=o.originalData[r],s="<strong>Decoded Values:</strong><br>";Object.entries(i).forEach(([c,p])=>{s+=`${c}: ${typeof p=="number"?p.toFixed(3):p}<br>`}),s+=`<strong>Class: ${a}</strong>`,n.html(s).style("left",e.pageX+15+"px").style("top",e.pageY-28+"px").transition().duration(200).style("opacity",1)}function be(e){e.transition().duration(500).style("opacity",0)}function ve(e,t,o,n,r){let a=d3.zoomIdentity,i=d3.zoom().scaleExtent([a.k,5]).translateExtent([[o.left,o.top],[n-o.right,r-o.bottom]]).on("zoom",s=>{t.attr("transform",s.transform)});e.call(i)}function Ce(e,t,o,n,r,a){e.append("g").attr("class","x-axis").attr("transform",`translate(0,${a-n.bottom})`).call(d3.axisBottom(t).ticks(10)).call(i=>i.select(".domain").remove()).call(i=>i.selectAll(".tick line").remove()),e.append("g").attr("class","y-axis").attr("transform",`translate(${n.left},0)`).call(d3.axisLeft(o).ticks(10)).call(i=>i.select(".domain").remove()).call(i=>i.selectAll(".tick line").remove())}function we(e,t,o,n,r){let a=e.append("g").attr("class","voronoi-regions");t.decisionBoundary.regions.forEach((i,s)=>{let c=t.decisionBoundary.regionClasses[s],p=r[c];a.append("polygon").attr("points",i.map(u=>`${o(u[0])},${n(u[1])}`).join(" ")).attr("fill",p).attr("stroke",l.ui.linkStroke).attr("stroke-width",.5).attr("opacity",.2)})}function $e(e){!e||!e.contentGroup||(e.contentGroup.selectAll(".link").style("stroke",l.ui.linkStroke).style("stroke-width",`${e.metrics.linkStrokeWidth}px`),e.contentGroup.selectAll(".node circle").style("stroke",l.ui.nodeStroke).style("stroke-width",`${e.metrics.nodeBorderStrokeWidth}px`))}function Fe(e,t){$e(t);for(let o=0;o<e.length-1;o++){let n=e[o],r=e[o+1];t.contentGroup.selectAll(".link").filter(a=>a.source===n&&a.target===r).style("stroke",l.ui.highlight).style("stroke-width",`${t.metrics.linkStrokeWidth}px`)}e.forEach(o=>{t.contentGroup.selectAll(".node").filter(n=>n===o).select("circle").style("stroke",l.ui.highlight).style("stroke-width",`${t.metrics.nodeBorderStrokeWidth}px`)})}function Te(e,t){let o=[],n=t.treeData.descendants()[0];for(;n&&(o.push(n),!n.data.is_leaf);)e[n.data.feature_name]<=n.data.threshold?n=n.children?.[0]||null:n=n.children?.[1]||null;return o}function Se(e,t,o,n,r){d3.selectAll("path.point").style("fill",(s,c)=>n[o.targets[c]]).style("opacity",l.opacity.hover);let a=o.pcaData.indexOf(t),i=o.originalData[a];if(window.lastClickedPoint===e){window.lastClickedPoint=null,$e(r);return}if(window.lastClickedPoint=e,d3.select(e).style("fill",l.ui.highlight).style("opacity",l.opacity.active),r&&r.treeData){let s=Te(i,r);Fe(s,r)}}function Ee(e,t,o,n,r,a,i){let s=d3.symbol().size(100),c=t.pcaData.length-1;return e.selectAll("path.point").data(t.pcaData).enter().append("path").attr("class","point").attr("transform",u=>`translate(${o(u[0])},${n(u[1])})`).attr("d",(u,d)=>s.type(d===c?d3.symbolStar:d3.symbolCircle)()).style("fill",(u,d)=>r[t.targets[d]]).style("stroke",l.ui.nodeStroke).style("stroke-width",1).style("opacity",l.opacity.hover).on("mouseover",(u,d)=>{ke(u,d,t,a),d3.select(u.currentTarget).style("opacity",l.opacity.active).style("stroke",l.ui.highlight)}).on("mouseout",u=>{be(a),d3.select(u.currentTarget).style("opacity",l.opacity.hover).style("stroke",l.ui.nodeStroke)}).on("click",function(u,d){Se(this,d,t,r,i)})}function Me(e,t,o){if(!e||!e.pcaData||!e.targets||!e.decisionBoundary||!e.originalData){console.error("Invalid PCA data structure:",e);return}let n=o||window.treeVisualization,r={data:e,points:null};Q(r);let a=800,i=800,s={top:40,right:40,bottom:40,left:40},c=xe();document.getElementById("x-axis-label").textContent=e.xAxisLabel,document.getElementById("y-axis-label").textContent=e.yAxisLabel,d3.select(t).select("svg").remove();let p=d3.select(t).append("svg").attr("width",a).attr("height",i),u=p.append("g");ve(p,u,s,a,i);let d=d3.scaleLinear().domain(e.decisionBoundary.xRange).range([s.left,a-s.right]),f=d3.scaleLinear().domain(e.decisionBoundary.yRange).range([i-s.bottom,s.top]),x=Array.from(new Set(e.targets)),g=k()||h(x);return we(u,e,d,f,g),Ce(u,d,f,s,a,i),r.points=Ee(u,e,d,f,g,c,n),r}function ze(e){if(!e){console.error("No visualization data provided");return}if(d3.select("#pca-plot").selectAll("*").remove(),d3.select("#visualization").selectAll("*").remove(),e.decisionTreeVisualizationData&&ye(e.decisionTreeVisualizationData),e.PCAvisualizationData){let t=window.treeVisualization;Me(e.PCAvisualizationData,"#pca-plot",t)}}function Be(e,t){window.currentState&&(window.currentState.parameters[e]=t)}var m={dataset_name:null,selectedClassifier:null,parameters:{},featureDescriptor:null};function je(){document.getElementById("classifierSection").style.display="none",document.getElementById("parameterSection").style.display="none",document.getElementById("parameterForm").innerHTML="",document.getElementById("featureButtonContainer").style.display="none",document.getElementById("featureCarousel").innerHTML="",document.querySelector(".svg-container").style.display="none",document.getElementById("pca-plot").innerHTML="",document.getElementById("visualization").innerHTML="",m.selectedClassifier=null,m.parameters={},m.featureDescriptor=null,h(null)}function Oe(){document.getElementById("featureButtonContainer").style.display="none",document.getElementById("featureCarousel").innerHTML="",document.querySelector(".svg-container").style.display="none",document.getElementById("pca-plot").innerHTML="",document.getElementById("visualization").innerHTML="",m.featureDescriptor=null}function We(){document.querySelector(".svg-container").style.display="none",document.getElementById("pca-plot").innerHTML="",document.getElementById("visualization").innerHTML=""}async function Ne(){let e=await fetch("http://127.0.0.1:8000/api/get-datasets");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}async function Re(){let e=await fetch("http://127.0.0.1:8000/api/get-classifiers");if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return await e.json()}window.selectDataset=async function(e){je(),m.dataset_name=e;try{let o=await(await fetch(`http://127.0.0.1:8000/api/get-dataset-info/${e}`)).json();o.target_names&&o.target_names.length>0&&h(o.target_names),document.getElementById("datasetInfo").innerHTML=`
            <h3>Dataset: ${e}</h3>
            <p>Samples: ${o.n_samples}</p>
            <p>Features: ${o.feature_names}</p>
            <p>Target: ${o.target_names}</p>
        `;let n=await Re();E(n),document.getElementById("classifierSection").style.display="block"}catch(t){console.error("Error fetching dataset info:",t)}};window.selectClassifier=async function(e){Oe(),m.selectedClassifier=e,m.parameters={};try{let n=(await(await fetch("http://127.0.0.1:8000/api/get-classifiers")).json()).classifiers[e];Object.entries(n).forEach(([r,a])=>{m.parameters[r]=a}),M(n),document.getElementById("parameterSection").style.display="block"}catch(t){console.error("Error fetching classifier parameters:",t)}};window.startTraining=async function(){We();let e={dataset_name:m.dataset_name,classifier:m.selectedClassifier,parameters:m.parameters};try{let t=await fetch("http://127.0.0.1:8000/api/train-model",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);let o=await t.json();m.featureDescriptor=o.descriptor;let n=document.getElementById("featureCarousel");R(o.descriptor),z(n),document.getElementById("featureButtonContainer").style.display="block"}catch(t){console.error("Training failed:",t)}};window.explainInstance=async function(){let e=B(),t=G(),o=m.dataset_name,n={instance:e,dataset_name:o,neighbourhood_size:t.neighbourhood_size,PCAstep:t.PCAstep};try{let r=await fetch("http://127.0.0.1:8000/api/explain",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error(`HTTP error! Status: ${r.status}`);let a=await r.json();document.querySelector(".svg-container").style.display="block",ze({decisionTreeVisualizationData:a.decisionTreeVisualizationData,PCAvisualizationData:a.PCAvisualizationData})}catch(r){console.error("Failed to explain instance:",r)}};window.updateParameter=Be;window.getFeatureValues=B;window.resetFeatures=q;window.onload=async function(){try{W(m);let e=await Ne();S(e)}catch(e){console.error("Failed to load datasets:",e)}};})();
